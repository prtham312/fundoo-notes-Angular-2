<app-toolbar
  (menuClicked)="isSidenavOpen = !isSidenavOpen"
  [viewMode]="viewMode"
  (toggleView)="toggleViewMode()"
></app-toolbar>

<mat-sidenav-container class="sidenav-container">
  <mat-sidenav
    mode="side"
    [opened]="true"
    [class.mat-drawer-collapsed]="!sidenavOpened && !isHovered"
    (mouseenter)="onMouseEnterSidenav()"
    (mouseleave)="onMouseLeaveSidenav()"
    class="custom-sidenav"
  >
    <app-sidenav></app-sidenav>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="dashboard-content">

      <!-- ✅ Notes Section -->
      <ng-container *ngIf="currentSection === 'notes'">
        <app-note-input (noteAdded)="onNoteCreated($event)"></app-note-input>


        <div *ngIf="pinnedNotes.length === 0 && otherNotes.length === 0" class="empty-notes-placeholder">
          <mat-icon class="empty-icon">lightbulb_outline</mat-icon>
          <p class="empty-message">Notes you add appear here</p>
        </div>

        <!-- ✅ PINNED -->
        <div *ngIf="pinnedNotes.length > 0" class="note-section">
          <div class="note-section-heading">PINNED</div>
          <div class="notes-container" [ngClass]="viewMode">
            <app-note-card
              *ngFor="let note of pinnedNotes"
              [id]="note.id"
              [title]="note.title"
              [description]="note.description"
              [color]="note.color || '#fff'"
              [isPined]="note.isPined"
              (pinToggled)="fetchNotesFromAPI()"
              (archived)="onNoteArchived()"
              [ngClass]="viewMode"
            ></app-note-card>
          </div>
        </div>

        <!-- ✅ OTHERS (your original notes list) -->
        <div *ngIf="otherNotes.length > 0" class="note-section">
          <div *ngIf="pinnedNotes.length > 0" class="note-section-heading">OTHERS</div>
          <div class="notes-container" [ngClass]="viewMode">
            <app-note-card
              *ngFor="let note of otherNotes"
              [id]="note.id"
              [title]="note.title"
              [description]="note.description"
              [color]="note.color || '#fff'"
              [isPined]="note.isPined"
              (pinToggled)="fetchNotesFromAPI()"
              (archived)="onNoteArchived()"
              [ngClass]="viewMode"
            ></app-note-card>
          </div>
        </div>
      </ng-container>

      <!-- ✅ Archive -->
      <app-archive
        *ngIf="currentSection === 'archive'"
        [viewMode]="viewMode"
      ></app-archive>
      <app-trash
  *ngIf="currentSection === 'trash'"
  [viewMode]="viewMode"
></app-trash>

    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
